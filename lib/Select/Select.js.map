{"version":3,"sources":["../../src/Select/Select.js"],"names":["SEARCH_INPUT_MIN_SIZE","WrapperSelect","props","optionsMap","options","reduce","agregate","current","value","values","hasOwnProperty","push","Array","isArray","concat","state","Set","isOpened","isFocused","isSelected","searchTerm","searchWidth","focusedIndex","v4","inputInnerRef","searchSizeRef","setState","getOptions","onOpen","onClose","setTimeout","focus","event","closeOptions","multi","from","pop","onChange","onInputClear","filter","opt","label","toLowerCase","trim","has","placeholder","searchable","classes","valueRenderer","SelectValueComp","SelectWrapperComp","content","size","map","key","onRemoveTag","selectValue","selectValueLabel","selectPlaceholder","selectMultiValueWrapper","selectInput","width","selectInputField","onSearching","n","noResultsText","optionRenderer","selectOptions","length","i","Object","assign","id","className","selectOption","tabIndex","onMouseOver","e","dataKey","target","getAttribute","onMouseOut","onMouseDown","onSelectValue","selectMenuOuter","selectMenu","clearable","selectClearZone","onClearValue","selectClear","generatedClassName","selectNode","name","disabled","node","selectInnerRef","selectControl","onSelectFocused","renderSelectMultiValueWrapper","renderSelectClearZone","selectArrowZone","selectArrow","renderSelectMenuOuter","PureComponent","stopPropagation","delete","preventDefault","resetField","newValue","clear","add","onValueClick","openOptions","setFocus","typing","filteredOptions","term","indexOf","getBoundingClientRect","lastIndex","keyCode","propTypes","any","array","func","bool","string","object","oneOfType","element","defaultProps"],"mappings":"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","file":"Select.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport enhanceWithClickOutside from 'react-click-outside'\nimport uuid from 'uuid';\n\nimport {\n  KEY_UP,\n  KEY_ESC,\n  KEY_DOWN,\n  KEY_ENTER,\n  KEY_BACKSPACE\n} from './constants'\n\nconst SEARCH_INPUT_MIN_SIZE = 1;\n\nimport Select from './partials/Select'\nimport SelectMenu from './partials/SelectMenu'\nimport SelectValue from './partials/SelectValue'\nimport SelectMultiValue from './partials/SelectMultiValue'\nimport SelectClear from './partials/SelectClear'\nimport SelectArrow from './partials/SelectArrow'\nimport SelectInput from './partials/SelectInput'\nimport SelectInputField from './partials/SelectInputField'\nimport SelectInputFieldSize from './partials/SelectInputFieldSize'\nimport SelectControl from './partials/SelectControl'\nimport SelectNoResults from './partials/SelectNoResults'\nimport SelectClearZone from './partials/SelectClearZone'\nimport SelectArrowZone from './partials/SelectArrowZone'\nimport SelectMenuOuter from './partials/SelectMenuOuter'\nimport SelectPlaceholder from './partials/SelectPlaceholder'\nimport SelectValueWrapper from './partials/SelectValueWrapper'\nimport SelectMultiValueWrapper from './partials/SelectMultiValueWrapper'\n\nimport ValueRenderer from './renderers/ValueRenderer'\nimport OptionRenderer from './renderers/OptionRenderer'\n\nimport stringifyValue from './functions/stringifyValue'\n\nclass WrapperSelect extends React.PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.optionsMap = props.options.reduce((agregate, current) => {\n      agregate[current.value] = current\n      return agregate\n    }, {})\n\n    let values = [];\n    if (props.value && this.optionsMap.hasOwnProperty(props.value)) {\n      values.push(props.value);\n    }\n\n    if (Array.isArray(props.value)) {\n      values = values.concat(props.value);\n    }\n\n    this.state = {\n      values: new Set(values),\n      isOpened: false,\n      isFocused: false,\n      isSelected: false,\n      searchTerm: null,\n      searchWidth: 1,\n      focusedIndex: 0,\n      options: props.options,\n      'aria-owns': this.props['aria-owns'] || uuid.v4(),\n      'input-field-id': uuid.v4()\n    }\n\n    this.inputInnerRef = null\n    this.searchSizeRef = null;\n  }\n\n  openOptions() {\n    this.setState({\n      options: this.getOptions(),\n      focusedIndex: 0,\n      isOpened: true\n    });\n    this.props.onOpen();\n  }\n\n  closeOptions() {\n    this.setState({ isOpened: false });\n    this.props.onClose();\n  }\n\n  setFocus() {\n    setTimeout(() => {\n      this.inputInnerRef && this.inputInnerRef.focus();\n    }, 10);\n  }\n\n  // react-click-outside callback\n  handleClickOutside(event){\n    if (this.state.isOpened) {\n      this.closeOptions()\n    }\n  }\n\n  onRemoveTag = (props, e) => {\n    e.stopPropagation();\n    const { multi } = this.props;\n\n    this.state.values.delete(props.value);\n\n    this.setState({\n      values: new Set(Array.from(this.state.values))\n    }, () => {\n      this.props.onChange(Array.from(this.state.values));\n    });\n  }\n\n  resetField() {\n    const { multi } = this.props;\n\n    let values = [];\n    if (multi) {\n      values = Array.from(this.state.values);\n      values.pop();\n      this.props.onChange(values);\n    }\n\n    this.setState({\n      values: new Set(values),\n      searchTerm: null,\n      focusedIndex: 0,\n      options: this.props.options,\n    }, () => {\n      this.closeOptions()\n      this.inputInnerRef.value = ''\n      this.props.onInputClear()\n    })\n  }\n\n  onClearValue = (event) => {\n    event.preventDefault()\n    event.stopPropagation()\n    this.resetField();\n  }\n\n  onSelectValue = (newValue, event) => {\n    const { multi } = this.props;\n    const { values } = this.state;\n\n    !multi && values.clear(); // when is not multi select\n\n    if (!values.has(newValue)) {\n      values.add(newValue);\n      this.setState({\n        values,\n        searchTerm: null,\n        focusedIndex: 0\n      }, () => {\n        this.inputInnerRef.value = ''\n        this.props.onChange(multi ? Array.from(values) : newValue);\n      })\n    }\n    this.closeOptions()\n    this.props.onValueClick(multi ? Array.from(values) : newValue, event);\n  }\n\n  onSelectFocused = () => {\n    this.setState({\n      isFocused: true\n    })\n    this.openOptions();\n    this.setFocus();\n  }\n\n  getOptions() {\n    const { multi } = this.props;\n    const { values } = this.state;\n    return this.props.options.filter((opt) => {\n      const label = opt.label.toLowerCase().trim()\n      if (values.has(label) && multi) {\n        return false;\n      }\n      return true;\n    });\n  }\n\n  onSearching = (event) => {\n    const { focusedIndex, options, isOpened } = this.state;\n\n    const typing = () => {\n      const filteredOptions = this.getOptions().filter((opt) => {\n        const label = opt.label.toLowerCase().trim()\n        const term = this.inputInnerRef.value.toLowerCase().trim()\n        return label.indexOf(term) !== -1\n      });\n\n      this.setState({\n        searchTerm: this.inputInnerRef.value,\n        searchWidth,\n        options: filteredOptions,\n        isOpened: true,\n        focusedIndex: 0\n      })\n\n      let searchWidth = SEARCH_INPUT_MIN_SIZE;\n      if (this.searchSizeRef) {\n        const width = this.searchSizeRef.getBoundingClientRect().width;\n        searchWidth = width > SEARCH_INPUT_MIN_SIZE ? width : SEARCH_INPUT_MIN_SIZE;\n      }\n\n      setTimeout(() => {\n        this.setState({ searchWidth })\n      });\n    }\n\n    const lastIndex = (options.length - 1)\n    switch (event.keyCode) {\n      case KEY_BACKSPACE: // backspace\n        if (!this.inputInnerRef.value) {\n          this.resetField();\n          break;\n        }\n        setTimeout(typing, 1);\n        break;\n      case KEY_UP:\n        this.setState({\n          focusedIndex: (focusedIndex <= 0 ? lastIndex : (focusedIndex - 1))\n        })\n        break;\n      case KEY_DOWN:\n        if (!isOpened) {\n          this.openOptions();\n          break;\n        }\n        this.setState({\n          focusedIndex: (focusedIndex >= lastIndex ? 0 : (focusedIndex + 1))\n        })\n        break;\n      case KEY_ENTER:\n        if (!options.length) break;\n        const newValue = options[focusedIndex].value\n        this.onSelectValue(newValue, event);\n        break;\n      case KEY_ESC:\n        this.closeOptions();\n        break;\n      default:\n        setTimeout(typing, 1);\n    }\n  }\n\n  renderSelectMultiValueWrapper() {\n    const { multi, placeholder, searchable, classes, valueRenderer } = this.props;\n    const { values, isOpened, isSelected, searchTerm, searchWidth } = this.state;\n\n    const SelectValueComp = multi ? SelectMultiValue : SelectValue;\n    const SelectWrapperComp = multi ? SelectMultiValueWrapper : SelectValueWrapper;\n\n    let content = '';\n\n    if (values.size) {\n      content = Array.from(values).map((value, key) => (\n        <SelectValueComp value={value} onRemoveTag={this.onRemoveTag} key={key} className={classes.selectValue} data-select-value data-multi-value={multi}>\n          {valueRenderer({ multi, value, label: this.optionsMap[value].label }, classes.selectValueLabel)}\n        </SelectValueComp>\n      ));\n    }\n\n    if (!values.size && !searchTerm) {\n      content = (\n        <SelectPlaceholder\n          className={classes.selectPlaceholder}\n          data-select-placeholder>{placeholder}</SelectPlaceholder>\n      )\n    }\n\n    if (!searchable) {\n      return (\n        <SelectWrapperComp\n          for={this.state['input-field-id']}\n          className={classes.selectMultiValueWrapper}\n          data-select-multi-value-wrapper={multi}>\n          {content}\n        </SelectWrapperComp>\n      );\n    }\n\n    return (\n      <SelectWrapperComp\n        for={this.state['input-field-id']}\n        className={classes.selectMultiValueWrapper}\n        data-select-multi-value-wrapper={multi}>\n        {content}\n        <SelectInput data-select-input className={classes.selectInput}>\n          <SelectInputField\n            style={{width: `${searchWidth}px`}}\n            id={this.state['input-field-id']}\n            className={classes.selectInputField}\n            data-select-input-search\n            onKeyDown={this.onSearching}\n            innerRef={(n) => this.inputInnerRef = n}\n            aria-label={placeholder}\n            aria-expanded={isOpened}\n            aria-owns={this.state['aria-owns']}\n            role=\"combobox\" type=\"text\" />\n        </SelectInput>\n        <SelectInputFieldSize\n          data-select-input-size\n          innerRef={(n) => this.searchSizeRef = n}>{searchTerm}</SelectInputFieldSize>\n      </SelectWrapperComp>\n    );\n  }\n\n  renderSelectMenuOuter() {\n    const { classes, noResultsText, optionRenderer } = this.props;\n    const { values, isOpened, focusedIndex, options } = this.state;\n\n    if (!isOpened) {\n      return (\n        <div aria-hidden=\"true\" id={['aria-owns']} role=\"listbox\">\n          <div role=\"option\" tabIndex=\"-1\" />\n        </div>\n      );\n    }\n\n    let selectOptions = <SelectNoResults>{noResultsText}</SelectNoResults>;\n\n    if (options.length > 0) {\n      selectOptions = options.map((opt, i) => {\n        const isSelected = values.has(opt.value);\n        const isFocused = focusedIndex === i;\n        return optionRenderer(Object.assign({\n          key: i,\n          'data-key': i,\n          isSelected,\n          id: this.state['aria-owns'],\n          className: classes.selectOption,\n          isFocused: focusedIndex == i,\n          tabIndex: values.has(opt.value) ? '0' : '-1',\n          onMouseOver: (e) => {\n            const dataKey = e.target.getAttribute('data-key');\n            this.setState({ focusedIndex: dataKey });\n          },\n          onMouseOut: (e) => {\n            this.setState({ focusedIndex: null });\n          },\n          onMouseDown: (e) => this.onSelectValue(opt.value, e)\n        }, opt), i);\n      });\n    }\n    return (\n      <SelectMenuOuter\n        className={classes.selectMenuOuter}\n        data-select-menu-outer>\n        <SelectMenu\n          role=\"listbox\"\n          className={classes.selectMenu} data-select-menu>\n          {selectOptions}\n        </SelectMenu>\n      </SelectMenuOuter>\n    )\n  }\n\n  renderSelectClearZone() {\n    const { clearable, classes } = this.props;\n\n    if (!clearable) return;\n\n    return (\n      <SelectClearZone\n        className={classes.selectClearZone}\n        data-select-clear-zone onMouseDown={this.onClearValue}>\n        <SelectClear\n          className={classes.selectClear} data-select-clear>Ã—</SelectClear>\n      </SelectClearZone>\n    );\n  }\n\n  componentDidMount() {\n    this.props.generatedClassName(this.selectNode.state.generatedClassName);\n  }\n\n  componentDidUpdate() {\n    this.props.generatedClassName(this.selectNode.state.generatedClassName);\n  }\n\n  render () {\n    const { name, disabled, className, classes } = this.props;\n    const { value, isSelected, isOpened } = this.state;\n    return (\n      <Select data-select className={className}\n        ref={(node) => this.selectNode = node} innerRef={(node) => this.selectInnerRef = node}>\n        <input type=\"hidden\" name={name} value={stringifyValue(value)} disabled={disabled} />\n        <SelectControl\n          isOpened={isOpened}\n          aria-haspopup={isOpened}\n          className={classes.selectControl}\n          data-select-control onMouseDown={this.onSelectFocused}>\n          {this.renderSelectMultiValueWrapper()}\n          {this.renderSelectClearZone()}\n          <SelectArrowZone\n            className={classes.selectArrowZone} data-select-arrow-zone>\n            <SelectArrow isOpened={isOpened} className={classes.selectArrow} data-select-arrow />\n          </SelectArrowZone>\n        </SelectControl>\n        {this.renderSelectMenuOuter()}\n      </Select>\n    )\n  }\n}\n\nWrapperSelect.propTypes = {\n  value: PropTypes.any,\n  options: PropTypes.array,\n  onClose: PropTypes.func,\n  onOpen: PropTypes.func,\n  onChange: PropTypes.func,\n  onValueClick: PropTypes.func,\n  onInputClear: PropTypes.func,\n  clearable: PropTypes.bool,\n  placeholder: PropTypes.string,\n  className: PropTypes.string,\n  classes: PropTypes.object,\n  noResultsText: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element\n  ]),\n  generatedClassName: PropTypes.func\n}\n\nWrapperSelect.defaultProps = {\n  onClose: () => {},\n  onOpen: () => {},\n  onChange: () => {},\n  onValueClick: () => {},\n  onInputClear: () => {},\n  clearable: false,\n  searchable: true,\n  multi: false,\n  options: [],\n  placeholder: 'Select...',\n  noResultsText: 'No results found',\n  classes: {\n    selectArrow: '',\n    selectArrowZone: '',\n    selectClear: '',\n    selectClearZone: '',\n    selectControl: '',\n    selectInput: '',\n    selectInputField: '',\n    selectMenu: '',\n    selectMenuOuter: '',\n    selectMultiValueWrapper: '',\n    selectOption: '',\n    selectPlaceholder: '',\n    selectValue: '',\n    selectValueLabel: ''\n  },\n  valueRenderer: ValueRenderer,\n  optionRenderer: OptionRenderer,\n  generatedClassName: () => {}\n}\n\nexport default enhanceWithClickOutside(WrapperSelect)\n"]}