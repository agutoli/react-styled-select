{"version":3,"sources":["../../src/Select/Select.js"],"names":["SEARCH_INPUT_MIN_SIZE","optionsMapReducer","agregate","current","value","WrapperSelect","props","state","values","updateValues","isOpened","isFocused","isSelected","searchTerm","searchWidth","focusedIndex","currentMenuScrollTop","options","uuid","v4","scrollerRef","inputRef","searchSizeRef","shouldFireClickOutsideHack","onSearchingBinded","onSearching","bind","onRemoveTagBinded","onRemoveTag","onClearValueBinded","onClearValue","onSelectValueBinded","onSelectValue","onSelectFocusedBinded","onSelectFocused","onSelectMenuScrollerBinded","onSelectMenuScroller","setRefAtVirtualizedBinded","setRefAtVirtualized","indexValues","Array","isArray","optionsMap","hasOwnProperty","push","concat","Set","reduce","virtualized","window","setTimeout","scrollTop","setState","getOptions","onOpen","onClose","_this","focus","event","closeOptions","stopPropagation","multi","delete","from","onChange","pop","onInputClear","preventDefault","resetField","newValue","clear","has","add","onValueClick","closeMenuOnSelect","clearInterval","focusedTimeout","openOptions","setFocus","filter","opt","label","toLowerCase","trim","onInputChange","onTyping","searchable","onKeyDown","typing","term","filteredOptions","indexOf","width","getBoundingClientRect","lastIndex","length","keyCode","KEY_BACKSPACE","KEY_UP","KEY_DOWN","KEY_ENTER","KEY_ESC","placeholder","classes","valueRenderer","disabled","SelectValueComp","SelectMultiValue","SelectValue","SelectWrapperComp","SelectMultiValueWrapper","SelectValueWrapper","content","_values","size","map","key","selectValue","selectValueLabel","selectPlaceholder","node","ReactDOM","findDOMNode","selectMultiValueWrapper","onKeyUp","onKeyPress","tabIndex","selectInput","selectInputField","target","noResultsText","optionRenderer","virtualizedMaxHeight","virtualizedOptionHeight","selectOptions","i","elementTopPosition","isTopHidden","isBottomHidden","Object","assign","id","className","selectOption","onMouseOver","e","dataKey","getAttribute","onMouseOut","onMouseDown","selectMenuOuter","renderSelectMenuVirtualizedOptions","renderSelectMenuOptions","selectMenu","scrollHeight","height","maxHeight","position","clearable","selectClearZone","selectClear","selectNode","generatedClassName","nextProps","name","style","required","setRef","zIndex","outline","opacity","selectControl","renderSelectMultiValueWrapper","renderSelectClearZone","selectArrowZone","selectArrow","renderSelectMenuOuter","React","PureComponent","propTypes","PropTypes","any","array","func","string","bool","number","object","oneOfType","element","defaultProps","ValueRenderer","OptionRenderer","EnhanceWrapperSelect","ShadowWrapperSelect","NormalAsync","ShadowAsync","Async","ShadowDOM"],"mappings":"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","file":"Select.js","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport enhanceWithClickOutside from 'react-click-outside'\nimport uuid from 'uuid';\nimport SelectAsync from './Async'\nimport shadowDOM from '../helpers/shadowDOM'\n\nimport {\n  KEY_UP,\n  KEY_ESC,\n  KEY_DOWN,\n  KEY_ENTER,\n  KEY_BACKSPACE\n} from './constants'\n\nconst SEARCH_INPUT_MIN_SIZE = 1;\n\nimport Select from './partials/Select'\nimport SelectMenu from './partials/SelectMenu'\nimport SelectMenuVirtualized from './partials/SelectMenuVirtualized'\nimport SelectValue from './partials/SelectValue'\nimport SelectMultiValue from './partials/SelectMultiValue'\nimport SelectClear from './partials/SelectClear'\nimport SelectArrow from './partials/SelectArrow'\nimport SelectInput from './partials/SelectInput'\nimport SelectInputField from './partials/SelectInputField'\nimport SelectInputFieldSize from './partials/SelectInputFieldSize'\nimport SelectControl from './partials/SelectControl'\nimport SelectNoResults from './partials/SelectNoResults'\nimport SelectClearZone from './partials/SelectClearZone'\nimport SelectArrowZone from './partials/SelectArrowZone'\nimport SelectMenuOuter from './partials/SelectMenuOuter'\nimport SelectPlaceholder from './partials/SelectPlaceholder'\nimport SelectValueWrapper from './partials/SelectValueWrapper'\nimport SelectMultiValueWrapper from './partials/SelectMultiValueWrapper'\n\nimport ValueRenderer from './renderers/ValueRenderer'\nimport OptionRenderer from './renderers/OptionRenderer'\n\nimport stringifyValue from './functions/stringifyValue'\n\nfunction optionsMapReducer(agregate, current) {\n  agregate[current.value] = current\n  return agregate\n}\n\nclass WrapperSelect extends React.PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      values: this.updateValues(props),\n      isOpened: false,\n      isFocused: false,\n      isSelected: false,\n      searchTerm: null,\n      searchWidth: 1,\n      focusedIndex: 0,\n      currentMenuScrollTop: 0,\n      options: props.options,\n      'aria-owns': this.props['aria-owns'] || uuid.v4(),\n      'input-field-id': uuid.v4()\n    }\n\n    this.scrollerRef = null\n    this.inputRef = null\n    this.searchSizeRef = null\n    this.shouldFireClickOutsideHack = null\n\n    this.onSearchingBinded = this.onSearching.bind(this)\n    this.onRemoveTagBinded = this.onRemoveTag.bind(this)\n    this.onClearValueBinded = this.onClearValue.bind(this)\n    this.onSelectValueBinded = this.onSelectValue.bind(this)\n    this.onSelectFocusedBinded = this.onSelectFocused.bind(this)\n    this.onSelectMenuScrollerBinded = this.onSelectMenuScroller.bind(this)\n    this.setRefAtVirtualizedBinded = this.setRefAtVirtualized.bind(this)\n  }\n\n  updateValues(props) {\n    this.indexValues(props)\n\n    let values = [];\n    if ((props.value && !Array.isArray(props.value)) && this.optionsMap.hasOwnProperty(props.value)) {\n      values.push(props.value)\n    }\n\n    if (Array.isArray(props.value)) {\n      values = values.concat(props.value)\n    }\n\n    return new Set(values)\n  }\n\n  indexValues(props) {\n    this.optionsMap = props.options.reduce(optionsMapReducer, {})\n  }\n\n  openOptions() {\n    const { virtualized } = this.props;\n    const { currentMenuScrollTop } = this.state;\n\n    if (this.scrollerRef && virtualized) {\n      window.setTimeout(() => {\n        this.scrollerRef.scrollTop = currentMenuScrollTop\n      }, 1)\n    }\n\n    this.setState({\n      options: this.getOptions(),\n      focusedIndex: 0,\n      isOpened: true\n    })\n    this.props.onOpen()\n  }\n\n  closeOptions() {\n    this.setState({ isOpened: false })\n    this.props.onClose()\n  }\n\n  setFocus() {\n    let _this = this\n    setTimeout(function() {\n      _this.inputRef && _this.inputRef.focus()\n    }, 10)\n  }\n\n  // react-click-outside callback\n\n  handleClickOutside(event) {\n    if (this.state.isOpened && this.shouldFireClickOutsideHack) {\n      this.closeOptions()\n      this.shouldFireClickOutsideHack = false\n    }\n  }\n\n  onRemoveTag(props, event) {\n    event.stopPropagation()\n    const { multi } = this.props;\n\n    this.state.values.delete(props.value)\n\n    this.setState({\n      values: new Set(Array.from(this.state.values))\n    }, () => {\n      this.props.onChange(Array.from(this.state.values))\n    })\n  }\n\n  resetField() {\n    const { multi } = this.props;\n\n    let values = [];\n    if (multi) {\n      values = Array.from(this.state.values)\n      values.pop()\n      this.props.onChange(values)\n    }\n\n    this.setState({\n      values: new Set(values),\n      searchTerm: null,\n      focusedIndex: 0,\n      options: this.props.options,\n    }, () => {\n      this.closeOptions()\n      this.inputRef.value = ''\n      this.props.onInputClear()\n    })\n  }\n\n  onClearValue(event) {\n    event.preventDefault()\n    event.stopPropagation()\n    this.resetField()\n  }\n\n  onSelectValue(newValue, event) {\n    const { multi } = this.props;\n    const { values } = this.state;\n\n    !multi && values.clear() // when is not multi select\n\n    if (!values.has(newValue)) {\n      values.add(newValue)\n      this.setState({\n        values,\n        searchTerm: null,\n        focusedIndex: 0\n      }, () => {\n        this.inputRef.value = ''\n        this.props.onChange(multi ? Array.from(values) : newValue)\n      })\n    }\n    this.closeOptions()\n    this.props.onValueClick(multi ? Array.from(values) : newValue, event)\n    this.props.closeMenuOnSelect(multi ? Array.from(values) : newValue, event)\n  }\n\n  onSelectFocused(event) {\n    this.shouldFireClickOutsideHack = false\n\n    clearInterval(this.focusedTimeout)\n    this.focusedTimeout = setTimeout(() => {\n      this.shouldFireClickOutsideHack = true\n    }, 200)\n\n    this.setState({\n      isFocused: true\n    })\n\n    this.openOptions()\n    this.setFocus()\n  }\n\n  getOptions() {\n    const { multi } = this.props;\n    const { values } = this.state;\n    return this.props.options.filter((opt) => {\n      const label = typeof opt.label === 'string' && opt.label.toLowerCase().trim()\n      if (label && values.has(label) && multi) {\n        return false;\n      }\n      return true;\n    })\n  }\n\n  onSearching(event) {\n    const { onInputChange, onTyping, searchable } = this.props\n    const { focusedIndex, options, isOpened } = this.state;\n\n    this.props.onKeyDown(event)\n\n    const typing = () => {\n      const term = this.inputRef.value.toLowerCase().trim()\n\n      onTyping(term)\n\n      const filteredOptions = this.getOptions().filter((opt) => {\n        if (typeof opt.label !== 'string') {\n          return true;\n        }\n\n        const label = opt.label.toLowerCase().trim()\n        return label.indexOf(term) !== -1\n      })\n\n      this.setState({\n        searchTerm: this.inputRef.value,\n        searchWidth,\n        options: filteredOptions,\n        isOpened: true,\n        focusedIndex: 0\n      })\n\n      let searchWidth = SEARCH_INPUT_MIN_SIZE;\n      if (this.searchSizeRef) {\n        const width = this.searchSizeRef.getBoundingClientRect().width;\n        searchWidth = width > SEARCH_INPUT_MIN_SIZE ? width : SEARCH_INPUT_MIN_SIZE;\n      }\n\n      setTimeout(() => {\n        this.setState({ searchWidth, currentMenuScrollTop: 0 })\n      })\n    }\n\n    const lastIndex = (options.length - 1)\n    switch (event.keyCode) {\n      case KEY_BACKSPACE: // backspace\n        if (!this.inputRef.value) {\n          this.resetField()\n          break;\n        }\n        setTimeout(typing, 1)\n        break;\n      case KEY_UP:\n        event.preventDefault();\n        this.setState({\n          focusedIndex: (focusedIndex <= 0 ? lastIndex : (focusedIndex - 1))\n        })\n        break;\n      case KEY_DOWN:\n        event.preventDefault();\n        if (!isOpened) {\n          this.openOptions()\n          break;\n        }\n        this.setState({\n          focusedIndex: (focusedIndex >= lastIndex ? 0 : (focusedIndex + 1))\n        })\n        break;\n      case KEY_ENTER:\n        event.preventDefault();\n        if (!options.length) break;\n        const newValue = options[focusedIndex].value\n        this.onSelectValueBinded(newValue, event)\n        break;\n      case KEY_ESC:\n        this.closeOptions()\n        break;\n      default:\n        if (searchable) {\n          setTimeout(typing, 1)\n        }\n    }\n  }\n\n  renderSelectMultiValueWrapper() {\n    const { multi, placeholder, searchable, classes, valueRenderer, disabled } = this.props;\n    const { values, isOpened, isSelected, searchTerm, searchWidth } = this.state;\n\n    const SelectValueComp = multi ? SelectMultiValue : SelectValue;\n    const SelectWrapperComp = multi ? SelectMultiValueWrapper : SelectValueWrapper;\n\n    let content = '';\n    let _values = values\n    if (_values.size) {\n\n      if (!multi && _values.size > 1) {\n        _values = new Set([])\n      }\n\n      content = Array.from(_values).map((value, key) => (\n        <SelectValueComp value={value} onRemoveTag={this.onRemoveTagBinded} key={key} className={classes.selectValue} data-select-value data-multi-value={multi}>\n          {valueRenderer({ multi, value, label: (this.optionsMap[value]||{}).label }, classes.selectValueLabel)}\n        </SelectValueComp>\n      ))\n\n      if (!multi && content.length > 1) {\n        setTimeout(() => {\n          this.resetField()\n        }, 10)\n      }\n    }\n\n    if (!_values.size && !searchTerm) {\n      content = (\n        <SelectPlaceholder\n          className={classes.selectPlaceholder}\n          data-select-placeholder>{placeholder}</SelectPlaceholder>\n      )\n    }\n\n    if (!searchable || multi) {\n      return (\n        <SelectWrapperComp\n          htmlFor={this.state['input-field-id']}\n          ref={(node) => {\n            if (node) {\n              this.inputRef = node\n              if (!node.focus) {\n                this.inputRef = ReactDOM.findDOMNode(node);\n              }\n            }\n          }}\n          className={classes.selectMultiValueWrapper}\n          onFocus={this.onSelectFocusedBinded}\n          onKeyDown={this.onSearchingBinded}\n          onKeyUp={this.props.onKeyUp}\n          onKeyPress={this.props.onKeyPress}\n          tabIndex={this.props.tabIndex}\n          data-select-multi-value-wrapper={multi}>\n          {content}\n        </SelectWrapperComp>\n      )\n    }\n\n    return (\n      <SelectWrapperComp\n        htmlFor={this.state['input-field-id']}\n        className={classes.selectMultiValueWrapper}\n        data-select-multi-value-wrapper={multi}>\n        {content}\n        <SelectInput data-select-input className={classes.selectInput}>\n          <SelectInputField\n            style={{width: `${searchWidth}px`}}\n            disabled={disabled}\n            id={this.state['input-field-id']}\n            className={classes.selectInputField}\n            data-select-input-search\n            onFocus={this.onSelectFocusedBinded}\n            onKeyUp={this.props.onKeyUp}\n            onKeyPress={this.props.onKeyPress}\n            onKeyDown={this.onSearchingBinded}\n            tabIndex={this.props.tabIndex}\n            onChange={this.props.onInputChange}\n            ref={(node) => {\n              if (node) {\n                this.inputRef = node\n                if (!node.focus) {\n                  this.inputRef = ReactDOM.findDOMNode(node);\n                }\n              }\n            }}\n            aria-label={placeholder}\n            aria-expanded={isOpened}\n            aria-owns={this.state['aria-owns']}\n            role=\"combobox\" type=\"text\" />\n        </SelectInput>\n        <SelectInputFieldSize\n          data-select-input-size\n          ref={(node) => {\n            this.searchSizeRef = node\n            if (node) {\n              if (!node.focus) {\n                this.searchSizeRef = ReactDOM.findDOMNode(node);\n              }\n            }\n          }}>{searchTerm}</SelectInputFieldSize>\n      </SelectWrapperComp>\n    )\n  }\n\n  onSelectMenuScroller(event) {\n    this.setState({\n      currentMenuScrollTop: event.target.scrollTop\n    })\n  }\n\n  renderSelectMenuOuter() {\n    const {\n      classes,\n      noResultsText,\n      optionRenderer,\n      disabled,\n      virtualizedMaxHeight,\n      virtualizedOptionHeight,\n      virtualized\n    } = this.props;\n\n    const {\n      values,\n      isOpened,\n      focusedIndex,\n      options,\n      currentMenuScrollTop\n    } = this.state;\n\n    if (!isOpened) {\n      return (\n        <div aria-hidden=\"true\" id={['aria-owns']} role=\"listbox\">\n          <div role=\"option\" tabIndex=\"-1\" />\n        </div>\n      )\n    }\n\n    let selectOptions = <SelectNoResults>{noResultsText}</SelectNoResults>;\n    if (options.length > 0) {\n      selectOptions = options.map((opt, i) => {\n        const elementTopPosition = (virtualizedOptionHeight * i) + virtualizedOptionHeight\n        const isTopHidden = currentMenuScrollTop > elementTopPosition\n        const isBottomHidden = currentMenuScrollTop < (elementTopPosition - (virtualizedMaxHeight + virtualizedOptionHeight))\n\n        if ((isTopHidden || isBottomHidden) && virtualized) {\n          return null\n        }\n\n        const isSelected = values.has(opt.value)\n        const isFocused = focusedIndex === i;\n        return optionRenderer(Object.assign({\n          key: i,\n          'data-key': i,\n          isSelected,\n          virtualized,\n          id: this.state['aria-owns'],\n          virtualizedOptionHeight: virtualizedOptionHeight,\n          className: classes.selectOption,\n          isFocused: focusedIndex == i,\n          tabIndex: values.has(opt.value) ? '0' : '-1',\n          onMouseOver: (e) => {\n            const dataKey = e.target.getAttribute('data-key')\n            this.setState({ focusedIndex: dataKey })\n          },\n          onMouseOut: (e) => {\n            this.setState({ focusedIndex: null })\n          },\n          onMouseDown: (e) => this.onSelectValueBinded(opt.value, e)\n        }, opt), i)\n      })\n    }\n\n    return (\n      <SelectMenuOuter\n        className={classes.selectMenuOuter}\n        data-select-menu-outer>\n        {virtualized ?\n          this.renderSelectMenuVirtualizedOptions(selectOptions) :\n          this.renderSelectMenuOptions(selectOptions)}\n      </SelectMenuOuter>\n    )\n  }\n\n  renderSelectMenuOptions(selectOptions) {\n    const { classes } = this.props;\n    return (\n      <SelectMenu\n        role=\"listbox\"\n        className={classes.selectMenu} data-select-menu>\n        {selectOptions}\n      </SelectMenu>\n    )\n  }\n\n  setRefAtVirtualized(node) {\n    if (node) {\n      this.scrollerRef = node\n    }\n  }\n\n  renderSelectMenuVirtualizedOptions(selectOptions) {\n    const { classes, virtualizedMaxHeight, virtualizedOptionHeight } = this.props;\n    const { options } = this.state;\n    const scrollHeight = options.length * virtualizedOptionHeight\n\n    return (\n      <SelectMenuVirtualized\n        ref={this.setRefAtVirtualizedBinded}\n        role=\"listbox\"\n        style={{\n          height: `${virtualizedMaxHeight}px`,\n          maxHeight: `${virtualizedMaxHeight}px`\n        }}\n        onScroll={this.onSelectMenuScrollerBinded}\n        className={classes.selectMenu} data-select-menu>\n        <div style={{height: `${scrollHeight}px`, position: 'relative'}}>\n          {selectOptions}\n        </div>\n      </SelectMenuVirtualized>\n    )\n  }\n\n  renderSelectClearZone() {\n    const { clearable, classes } = this.props;\n\n    if (!clearable) return;\n\n    return (\n      <SelectClearZone\n        className={classes.selectClearZone}\n        data-select-clear-zone onMouseDown={this.onClearValueBinded}>\n        <SelectClear\n          className={classes.selectClear} data-select-clear>×</SelectClear>\n      </SelectClearZone>\n    )\n  }\n\n  componentDidMount() {\n    if (this.selectNode) {\n      this.props.generatedClassName(this.selectNode.className)\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.selectNode) {\n      this.props.generatedClassName(this.selectNode.className)\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      options: nextProps.options,\n      values: this.updateValues(nextProps)\n    })\n  }\n\n  render () {\n    const { name, disabled, className, classes, style, required } = this.props;\n    const { value, isSelected, isOpened } = this.state;\n    const values = Array.from(this.state.values)\n\n    const setRef = (node) => {\n      this.selectNode = node\n      if ((node) && !node.focus) {\n        this.selectNode = ReactDOM.findDOMNode(node);\n      }\n    }\n\n    return (\n      <Select style={style} data-select className={className} disabled={disabled}\n        ref={setRef}>\n        <input\n          type={required ? \"text\" : \"hidden\"}\n          name={name}\n          style={{position: \"absolute\", zIndex: \"0\", outline: \"none\", opacity: \"0\"}}\n          value={stringifyValue(values.length ? values : \"\" )}\n          disabled={disabled} required={required} />\n        <SelectControl\n          disabled={disabled}\n          isOpened={isOpened}\n          aria-haspopup={isOpened}\n          className={classes.selectControl}\n          data-select-control onMouseDown={this.onSelectFocusedBinded}>\n          {this.renderSelectMultiValueWrapper()}\n          {this.renderSelectClearZone()}\n          <SelectArrowZone\n            className={classes.selectArrowZone} data-select-arrow-zone>\n            <SelectArrow isOpened={isOpened} className={classes.selectArrow} data-select-arrow />\n          </SelectArrowZone>\n        </SelectControl>\n        {this.renderSelectMenuOuter()}\n      </Select>\n    )\n  }\n}\n\nWrapperSelect.propTypes = {\n  value: PropTypes.any,\n  options: PropTypes.array,\n  onClose: PropTypes.func,\n  onOpen: PropTypes.func,\n  onChange: PropTypes.func,\n  onKeyUp: PropTypes.func,\n  onKeyPress: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  onValueClick: PropTypes.func,\n  tabIndex: PropTypes.string,\n  closeMenuOnSelect: PropTypes.func,\n  virtualized: PropTypes.bool,\n  virtualizedMaxHeight: PropTypes.number,\n  virtualizedOptionHeight: PropTypes.number,\n  onInputClear: PropTypes.func,\n  clearable: PropTypes.bool,\n  placeholder: PropTypes.any,\n  className: PropTypes.string,\n  classes: PropTypes.object,\n  noResultsText: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element\n  ]),\n  generatedClassName: PropTypes.func\n}\n\nWrapperSelect.defaultProps = {\n  onClose: () => {},\n  onOpen: () => {},\n  onChange: () => {},\n  onKeyUp: () => {},\n  onKeyPress: () => {},\n  onKeyDown: () => {},\n  onInputChange: () => {},\n  onTyping: () => {},\n  onValueClick: () => {},\n  onInputClear: () => {},\n  tabIndex: '0',\n  closeMenuOnSelect: () => {},\n  clearable: false,\n  searchable: true,\n  disabled: false,\n  multi: false,\n  options: [],\n  virtualized: false,\n  virtualizedMaxHeight: 198,\n  virtualizedOptionHeight: 38,\n  placeholder: 'Select...',\n  noResultsText: 'No results found',\n  classes: {\n    selectArrow: '',\n    selectArrowZone: '',\n    selectClear: '',\n    selectClearZone: '',\n    selectControl: '',\n    selectInput: '',\n    selectInputField: '',\n    selectMenu: '',\n    selectMenuOuter: '',\n    selectMultiValueWrapper: '',\n    selectOption: '',\n    selectPlaceholder: '',\n    selectValue: '',\n    selectValueLabel: ''\n  },\n  valueRenderer: ValueRenderer,\n  optionRenderer: OptionRenderer,\n  generatedClassName: () => {}\n}\n\nconst EnhanceWrapperSelect = enhanceWithClickOutside(WrapperSelect)\nconst ShadowWrapperSelect = shadowDOM(EnhanceWrapperSelect)\n\nconst NormalAsync = props => <SelectAsync {...props}><EnhanceWrapperSelect /></SelectAsync>\nconst ShadowAsync = props => <SelectAsync {...props}><ShadowWrapperSelect /></SelectAsync>\n\nShadowWrapperSelect.Async = ShadowAsync\n\nexport const Async  = EnhanceWrapperSelect.Async = NormalAsync\nexport const ShadowDOM = EnhanceWrapperSelect.ShadowDOM = ShadowWrapperSelect\n\nexport default EnhanceWrapperSelect\n"]}