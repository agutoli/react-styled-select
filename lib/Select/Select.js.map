{"version":3,"sources":["../../src/Select/Select.js"],"names":["SEARCH_INPUT_MIN_SIZE","WrapperSelect","props","indexValues","values","value","optionsMap","hasOwnProperty","push","Array","isArray","concat","state","Set","isOpened","isFocused","isSelected","searchTerm","searchWidth","focusedIndex","options","v4","inputInnerRef","searchSizeRef","shouldFireClickOutsideHack","reduce","agregate","current","setState","getOptions","onOpen","onClose","setTimeout","focus","event","closeOptions","multi","from","pop","onChange","onInputClear","filter","opt","label","toLowerCase","trim","has","placeholder","searchable","classes","valueRenderer","SelectValueComp","SelectWrapperComp","content","size","map","key","onRemoveTag","selectValue","selectValueLabel","selectPlaceholder","n","selectMultiValueWrapper","selectInput","width","selectInputField","onSearching","onInputChange","noResultsText","optionRenderer","selectOptions","length","i","Object","assign","id","className","selectOption","tabIndex","onMouseOver","e","dataKey","target","getAttribute","onMouseOut","onMouseDown","onSelectValue","selectMenuOuter","selectMenu","clearable","selectClearZone","onClearValue","selectClear","generatedClassName","selectNode","nextProps","name","disabled","node","selectInnerRef","selectControl","onSelectFocused","renderSelectMultiValueWrapper","renderSelectClearZone","selectArrowZone","selectArrow","renderSelectMenuOuter","PureComponent","stopPropagation","delete","preventDefault","resetField","newValue","clear","add","onValueClick","clearInterval","focusedTimeout","window","openOptions","setFocus","onTyping","typing","term","filteredOptions","indexOf","getBoundingClientRect","lastIndex","keyCode","propTypes","any","array","func","bool","string","object","oneOfType","element","defaultProps","EnhanceWrapperSelect","ShadowWrapperSelect","NormalAsync","ShadowAsync","Async","ShadowDOM"],"mappings":"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","file":"Select.js","sourcesContent":["import React from 'react'\n\nrequire('@webcomponents/shadydom');\n\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport enhanceWithClickOutside from 'react-click-outside'\nimport uuid from 'uuid';\nimport SelectAsync from './Async'\nimport shadowDOM from '../helpers/shadowDOM'\n\nimport {\n  KEY_UP,\n  KEY_ESC,\n  KEY_DOWN,\n  KEY_ENTER,\n  KEY_BACKSPACE\n} from './constants'\n\nconst SEARCH_INPUT_MIN_SIZE = 1;\n\nimport Select from './partials/Select'\nimport SelectMenu from './partials/SelectMenu'\nimport SelectValue from './partials/SelectValue'\nimport SelectMultiValue from './partials/SelectMultiValue'\nimport SelectClear from './partials/SelectClear'\nimport SelectArrow from './partials/SelectArrow'\nimport SelectInput from './partials/SelectInput'\nimport SelectInputField from './partials/SelectInputField'\nimport SelectInputFieldSize from './partials/SelectInputFieldSize'\nimport SelectControl from './partials/SelectControl'\nimport SelectNoResults from './partials/SelectNoResults'\nimport SelectClearZone from './partials/SelectClearZone'\nimport SelectArrowZone from './partials/SelectArrowZone'\nimport SelectMenuOuter from './partials/SelectMenuOuter'\nimport SelectPlaceholder from './partials/SelectPlaceholder'\nimport SelectValueWrapper from './partials/SelectValueWrapper'\nimport SelectMultiValueWrapper from './partials/SelectMultiValueWrapper'\n\nimport ValueRenderer from './renderers/ValueRenderer'\nimport OptionRenderer from './renderers/OptionRenderer'\n\nimport stringifyValue from './functions/stringifyValue'\n\nclass WrapperSelect extends React.PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.indexValues(props)\n\n    let values = [];\n    if (props.value && this.optionsMap.hasOwnProperty(props.value)) {\n      values.push(props.value);\n    }\n\n    if (Array.isArray(props.value)) {\n      values = values.concat(props.value);\n    }\n\n    this.state = {\n      values: new Set(values),\n      isOpened: false,\n      isFocused: false,\n      isSelected: false,\n      searchTerm: null,\n      searchWidth: 1,\n      focusedIndex: 0,\n      options: props.options,\n      'aria-owns': this.props['aria-owns'] || uuid.v4(),\n      'input-field-id': uuid.v4()\n    }\n\n    this.inputInnerRef = null\n    this.searchSizeRef = null\n    this.shouldFireClickOutsideHack = null\n  }\n\n  indexValues(props) {\n    this.optionsMap = props.options.reduce((agregate, current) => {\n      agregate[current.value] = current\n      return agregate\n    }, {})\n  }\n\n  openOptions() {\n    this.setState({\n      options: this.getOptions(),\n      focusedIndex: 0,\n      isOpened: true\n    });\n    this.props.onOpen();\n  }\n\n  closeOptions() {\n    this.setState({ isOpened: false });\n    this.props.onClose();\n  }\n\n  setFocus() {\n    setTimeout(() => {\n      this.inputInnerRef && this.inputInnerRef.focus();\n    }, 10);\n  }\n\n  // react-click-outside callback\n\n  handleClickOutside(event) {\n    if (this.state.isOpened && this.shouldFireClickOutsideHack) {\n      this.closeOptions()\n      this.shouldFireClickOutsideHack = false\n    }\n  }\n\n  onRemoveTag = (props, e) => {\n    e.stopPropagation();\n    const { multi } = this.props;\n\n    this.state.values.delete(props.value);\n\n    this.setState({\n      values: new Set(Array.from(this.state.values))\n    }, () => {\n      this.props.onChange(Array.from(this.state.values));\n    });\n  }\n\n  resetField() {\n    const { multi } = this.props;\n\n    let values = [];\n    if (multi) {\n      values = Array.from(this.state.values);\n      values.pop();\n      this.props.onChange(values);\n    }\n\n    this.setState({\n      values: new Set(values),\n      searchTerm: null,\n      focusedIndex: 0,\n      options: this.props.options,\n    }, () => {\n      this.closeOptions()\n      this.inputInnerRef.value = ''\n      this.props.onInputClear()\n    })\n  }\n\n  onClearValue = (event) => {\n    event.preventDefault()\n    event.stopPropagation()\n    this.resetField();\n  }\n\n  onSelectValue = (newValue, event) => {\n    const { multi } = this.props;\n    const { values } = this.state;\n\n    !multi && values.clear(); // when is not multi select\n\n    if (!values.has(newValue)) {\n      values.add(newValue);\n      this.setState({\n        values,\n        searchTerm: null,\n        focusedIndex: 0\n      }, () => {\n        this.inputInnerRef.value = ''\n        this.props.onChange(multi ? Array.from(values) : newValue);\n      })\n    }\n    this.closeOptions()\n    this.props.onValueClick(multi ? Array.from(values) : newValue, event);\n  }\n\n  onSelectFocused = (event) => {\n    this.shouldFireClickOutsideHack = false\n\n    clearInterval(this.focusedTimeout)\n    this.focusedTimeout = window.setTimeout(() => {\n      this.shouldFireClickOutsideHack = true\n    }, 200)\n\n    this.setState({\n      isFocused: true\n    })\n\n    this.openOptions();\n    this.setFocus();\n  }\n\n  getOptions() {\n    const { multi } = this.props;\n    const { values } = this.state;\n    return this.props.options.filter((opt) => {\n      const label = typeof opt.label === 'string' && opt.label.toLowerCase().trim()\n      if (label && values.has(label) && multi) {\n        return false;\n      }\n      return true;\n    });\n  }\n\n  onSearching = (event) => {\n    const { onInputChange, onTyping } = this.props\n    const { focusedIndex, options, isOpened } = this.state;\n\n    const typing = () => {\n      const term = this.inputInnerRef.value.toLowerCase().trim()\n\n      onTyping(term)\n\n      const filteredOptions = this.getOptions().filter((opt) => {\n        if (typeof opt.label !== 'string') {\n          return true;\n        }\n\n        const label = opt.label.toLowerCase().trim()\n        return label.indexOf(term) !== -1\n      });\n\n      this.setState({\n        searchTerm: this.inputInnerRef.value,\n        searchWidth,\n        options: filteredOptions,\n        isOpened: true,\n        focusedIndex: 0\n      })\n\n      let searchWidth = SEARCH_INPUT_MIN_SIZE;\n      if (this.searchSizeRef) {\n        const width = this.searchSizeRef.getBoundingClientRect().width;\n        searchWidth = width > SEARCH_INPUT_MIN_SIZE ? width : SEARCH_INPUT_MIN_SIZE;\n      }\n\n      setTimeout(() => {\n        this.setState({ searchWidth })\n      });\n    }\n\n    const lastIndex = (options.length - 1)\n    switch (event.keyCode) {\n      case KEY_BACKSPACE: // backspace\n        if (!this.inputInnerRef.value) {\n          this.resetField();\n          break;\n        }\n        setTimeout(typing, 1);\n        break;\n      case KEY_UP:\n        this.setState({\n          focusedIndex: (focusedIndex <= 0 ? lastIndex : (focusedIndex - 1))\n        })\n        break;\n      case KEY_DOWN:\n        if (!isOpened) {\n          this.openOptions();\n          break;\n        }\n        this.setState({\n          focusedIndex: (focusedIndex >= lastIndex ? 0 : (focusedIndex + 1))\n        })\n        break;\n      case KEY_ENTER:\n        if (!options.length) break;\n        const newValue = options[focusedIndex].value\n        this.onSelectValue(newValue, event);\n        break;\n      case KEY_ESC:\n        this.closeOptions();\n        break;\n      default:\n        setTimeout(typing, 1);\n    }\n  }\n\n  renderSelectMultiValueWrapper() {\n    const { multi, placeholder, searchable, classes, valueRenderer } = this.props;\n    const { values, isOpened, isSelected, searchTerm, searchWidth } = this.state;\n\n    const SelectValueComp = multi ? SelectMultiValue : SelectValue;\n    const SelectWrapperComp = multi ? SelectMultiValueWrapper : SelectValueWrapper;\n\n    let content = '';\n\n    if (values.size) {\n      content = Array.from(values).map((value, key) => (\n        <SelectValueComp value={value} onRemoveTag={this.onRemoveTag} key={key} className={classes.selectValue} data-select-value data-multi-value={multi}>\n          {valueRenderer({ multi, value, label: this.optionsMap[value].label }, classes.selectValueLabel)}\n        </SelectValueComp>\n      ));\n    }\n\n    if (!values.size && !searchTerm) {\n      content = (\n        <SelectPlaceholder\n          className={classes.selectPlaceholder}\n          data-select-placeholder>{placeholder}</SelectPlaceholder>\n      )\n    }\n\n    if (!searchable) {\n      return (\n        <SelectWrapperComp\n          for={this.state['input-field-id']}\n          innerRef={(n) => this.inputInnerRef = n}\n          className={classes.selectMultiValueWrapper}\n          data-select-multi-value-wrapper={multi}>\n          {content}\n        </SelectWrapperComp>\n      );\n    }\n\n    return (\n      <SelectWrapperComp\n        for={this.state['input-field-id']}\n        className={classes.selectMultiValueWrapper}\n        data-select-multi-value-wrapper={multi}>\n        {content}\n        <SelectInput data-select-input className={classes.selectInput}>\n          <SelectInputField\n            style={{width: `${searchWidth}px`}}\n            id={this.state['input-field-id']}\n            className={classes.selectInputField}\n            data-select-input-search\n            onKeyDown={this.onSearching}\n            onChange={this.props.onInputChange}\n            innerRef={(n) => this.inputInnerRef = n}\n            aria-label={placeholder}\n            aria-expanded={isOpened}\n            aria-owns={this.state['aria-owns']}\n            role=\"combobox\" type=\"text\" />\n        </SelectInput>\n        <SelectInputFieldSize\n          data-select-input-size\n          innerRef={(n) => this.searchSizeRef = n}>{searchTerm}</SelectInputFieldSize>\n      </SelectWrapperComp>\n    );\n  }\n\n  renderSelectMenuOuter() {\n    const { classes, noResultsText, optionRenderer } = this.props;\n    const { values, isOpened, focusedIndex, options } = this.state;\n\n    if (!isOpened) {\n      return (\n        <div aria-hidden=\"true\" id={['aria-owns']} role=\"listbox\">\n          <div role=\"option\" tabIndex=\"-1\" />\n        </div>\n      );\n    }\n\n    let selectOptions = <SelectNoResults>{noResultsText}</SelectNoResults>;\n\n    if (options.length > 0) {\n      selectOptions = options.map((opt, i) => {\n        const isSelected = values.has(opt.value);\n        const isFocused = focusedIndex === i;\n        return optionRenderer(Object.assign({\n          key: i,\n          'data-key': i,\n          isSelected,\n          id: this.state['aria-owns'],\n          className: classes.selectOption,\n          isFocused: focusedIndex == i,\n          tabIndex: values.has(opt.value) ? '0' : '-1',\n          onMouseOver: (e) => {\n            const dataKey = e.target.getAttribute('data-key');\n            this.setState({ focusedIndex: dataKey });\n          },\n          onMouseOut: (e) => {\n            this.setState({ focusedIndex: null });\n          },\n          onMouseDown: (e) => this.onSelectValue(opt.value, e)\n        }, opt), i);\n      });\n    }\n    return (\n      <SelectMenuOuter\n        className={classes.selectMenuOuter}\n        data-select-menu-outer>\n        <SelectMenu\n          role=\"listbox\"\n          className={classes.selectMenu} data-select-menu>\n          {selectOptions}\n        </SelectMenu>\n      </SelectMenuOuter>\n    )\n  }\n\n  renderSelectClearZone() {\n    const { clearable, classes } = this.props;\n\n    if (!clearable) return;\n\n    return (\n      <SelectClearZone\n        className={classes.selectClearZone}\n        data-select-clear-zone onMouseDown={this.onClearValue}>\n        <SelectClear\n          className={classes.selectClear} data-select-clear>Ã—</SelectClear>\n      </SelectClearZone>\n    );\n  }\n\n  componentDidMount() {\n    this.props.generatedClassName(this.selectNode.state.generatedClassName);\n  }\n\n  componentDidUpdate() {\n    this.props.generatedClassName(this.selectNode.state.generatedClassName);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      options: nextProps.options\n    }, () => this.indexValues(nextProps))\n  }\n\n  render () {\n    const { name, disabled, className, classes } = this.props;\n    const { value, isSelected, isOpened } = this.state;\n    return (\n      <Select data-select className={className}\n        ref={(node) => this.selectNode = node} innerRef={(node) => this.selectInnerRef = node}>\n        <input type=\"hidden\" name={name} value={stringifyValue(value)} disabled={disabled} />\n        <SelectControl\n          isOpened={isOpened}\n          aria-haspopup={isOpened}\n          className={classes.selectControl}\n          data-select-control onMouseDown={this.onSelectFocused}>\n          {this.renderSelectMultiValueWrapper()}\n          {this.renderSelectClearZone()}\n          <SelectArrowZone\n            className={classes.selectArrowZone} data-select-arrow-zone>\n            <SelectArrow isOpened={isOpened} className={classes.selectArrow} data-select-arrow />\n          </SelectArrowZone>\n        </SelectControl>\n        {this.renderSelectMenuOuter()}\n      </Select>\n    )\n  }\n}\n\nWrapperSelect.propTypes = {\n  value: PropTypes.any,\n  options: PropTypes.array,\n  onClose: PropTypes.func,\n  onOpen: PropTypes.func,\n  onChange: PropTypes.func,\n  onValueClick: PropTypes.func,\n  onInputClear: PropTypes.func,\n  clearable: PropTypes.bool,\n  placeholder: PropTypes.string,\n  className: PropTypes.string,\n  classes: PropTypes.object,\n  noResultsText: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element\n  ]),\n  generatedClassName: PropTypes.func\n}\n\nWrapperSelect.defaultProps = {\n  onClose: () => {},\n  onOpen: () => {},\n  onChange: () => {},\n  onInputChange: () => {},\n  onTyping: () => {},\n  onValueClick: () => {},\n  onInputClear: () => {},\n  clearable: false,\n  searchable: true,\n  multi: false,\n  options: [],\n  placeholder: 'Select...',\n  noResultsText: 'No results found',\n  classes: {\n    selectArrow: '',\n    selectArrowZone: '',\n    selectClear: '',\n    selectClearZone: '',\n    selectControl: '',\n    selectInput: '',\n    selectInputField: '',\n    selectMenu: '',\n    selectMenuOuter: '',\n    selectMultiValueWrapper: '',\n    selectOption: '',\n    selectPlaceholder: '',\n    selectValue: '',\n    selectValueLabel: ''\n  },\n  valueRenderer: ValueRenderer,\n  optionRenderer: OptionRenderer,\n  generatedClassName: () => {}\n}\n\nconst EnhanceWrapperSelect = enhanceWithClickOutside(WrapperSelect)\nconst ShadowWrapperSelect = shadowDOM(EnhanceWrapperSelect)\n\nconst NormalAsync = props => <SelectAsync {...props}><EnhanceWrapperSelect /></SelectAsync>\nconst ShadowAsync = props => <SelectAsync {...props}><ShadowWrapperSelect /></SelectAsync>\n\nShadowWrapperSelect.Async = ShadowAsync\n\nexport const Async  = EnhanceWrapperSelect.Async = NormalAsync\nexport const ShadowDOM = EnhanceWrapperSelect.ShadowDOM = ShadowWrapperSelect\n\nexport default EnhanceWrapperSelect\n"]}